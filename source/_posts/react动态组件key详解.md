---
title: react动态组件key详解
date: 2018-01-08 08:10:24
tags: react
---

在写动态子组件的时候，如果没有给组件添加`key`，则会报一个警告，这个警告指的是，如果每一个子组件是一个数组或者迭代器的话，那么必须有一个唯一的`key`，那么，这个`key`到底是做什么的呢？

想象一下，如果我们要渲染一个5000项的成绩排名榜单，而且每隔几秒都会更新一次排名，其中大部分排名只是位置变化了，还有少部分是完全更新了，还有少部分是删除了。

这个时候`key`就有用了，他是用来标识当前唯一项的。

这个`key`是每次用来做`Virtual DOM diff`的，如果这个`key`设置为当前成绩单中的一项数据，比如:`sid`.`title`等等，这个时候`react`它就是知道你的数据只是变化了位置或者只是删除了，则不会重新渲染唯一匹配的数据，这个也是优化的关键点之一。

有的人则把这个`key`设置为数组索引或者是一个随机数，这是一种非常低效的做法，因为这个`key`没有和当前的数据项做一个唯一的匹配，这个时候，那么不管有没有相同的是项，都会重新渲染。

因为对这个`key`有一个原则，那就是独一无二，且能不用随机或者索引值就不用。

关于`key`，还需要知道一种情况，那就是俩个子组件需要渲染的时候，我们没办法给他们设置`key`,这个时候就要用到`react`插件 createFragment 来解决，详情`github`查看API

