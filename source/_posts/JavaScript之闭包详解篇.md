---
title: JavaScript之闭包详解篇
date: 2017-05-17 20:42:56
tags: javascript
---
再看本篇之前需要有作用域的知识，如果您还不懂作用域，请看本人上一篇文章 [JavaScript之作用域详解篇](https://blockmood.github.io/2017/05/16/JavaScript%E4%B9%8B%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%AF%A6%E8%A7%A3%E7%AF%87/)

### 利用闭包突破作用域链
上篇文章中我们说到了可以利用闭包突破作用域链，那么首先我来介绍一个闭包这个概念，先上代码。

``` bash
var a = 1;
function f(){
	var b =2;
	function n(){
		var c = 3;
	}
}	
```

首先我说一下全局作用域，可以将其看做是一个包含一切的宇宙，其中可以包含各种变量和函数等等，但是每个函数也有一个自己的作用域，用于存储一些别的变量和函数，现在我们假设a变量在全局作用域中，变量b在函数f()作用域中，变量c在函数n()作用域中,但是n函数也在f()函数作用域中，在这里呢，我们可以访问的作用域为全局，函数f()，函数n(),其中变量a和变量b之间是不连通的，因为变量b在函数f()以外是不可见的，但是我们可以将变量c和变量b连通起来，或者也可以说将函数n()和变量b连接起来，当我们将函数n()的作用域扩展到f()以外，并且止步于全局空间以内的时候，这个时候就产生了闭包。

函数n()会和变量a一样，置身于全局作用域，而且函数有一个特点，就是说它还记得被定义时所处于的环境，因此，它仍然可以访问函数f()作用域中的b变量,因为现在函数n和变量a都处于同一个作用域，但是函数n()可以访问变量b，但是变量a则不可以。

### 例子
下面我们来看一个函数

``` bash
function f(){
	var b = 'b';
	return function(){
		return b;
	}
}
```

这个函数含有了一个局部变量b，它在全局是不可见的，

``` bash
console.log(b);
输出：b is not defined
```

接下来我们看一个函数f的返回值，它是另外的一个函数,我们可以把它看成是上面讲的函数n，该函数有自己的私用空间，同时也可以访问函数f()的空间和全局空间，所以变量b对他来说是可见的，因为函数f()时可以在全局中被调用的（它是一个全局函数），所以我们可以把它的返回值赋值给另外的一个全局变量，这个时候呢就生成了一个可以访问函数f()私有空间的一个新的全局函数，直接看代码。

``` bash
var n = f();
console.log(n());
输出:b	
```

今天先写这么多，更深层次的后面再讲。